{% extends "base.html" %}

{% block title %}Dashboard | TPC | CSE | AUS{% endblock %}
{% load humanize %}
{% block content %}
<div class="container-xl col-12 col-xl-10 p-3 p-xl-5 min-vh-100 position-relative">
    <h3 class="lh-1">Hey {{request.user.short_name}}</h3>
    <h1 class="display-5 fw-bold text-body-emphasis lh-1">Welcome to your Dashboard</h1>
    <div class="my-5">
        <ul class="list-group list-group-flush my-5">
            <li class="list-group-item list-group-item-accent p-4">
                <div
                    class="d-flex align-items-center justify-content-between m-0 icon-link icon-link-hover no-shadow">
                    <div class="d-flex align-items-center gap-4">
                        <i class="bi bi-bell display-5"></i>
                        <div class="me-auto">
                            <h2 class="fw-bold text-body-emphasis lh-1">Notices and Updates</h2>
                            <div class="font-monospace" style="width: fit-content;">
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 8ch;">Total:</span>
                                    <span class="me-3">{{total_notice_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0" href="{% url 'notices' %}">
                                        View
                                    </a>
                                </div>
                                {% if request.user.is_superuser or request.user.is_coordinator or request.user.role == 'staff' or request.user.role == 'recruiter' %}
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 8ch;">By You:</span>
                                    <span class="me-3">{{user_notice_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'notices' %}?post-filter=by-me">
                                        View
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            {% if request.user.is_superuser or request.user.is_coordinator or request.user.role == 'staff' %}
            <li class="list-group-item list-group-item-accent p-4">
                <div class="d-flex align-items-start gap-4">
                    <i class="bi bi-person-lines-fill display-5"></i>
                    <div class="me-auto">
                        <h2 class="fw-bold text-body-emphasis lh-1">Filter Students</h2>
                        <div>Use our advanced filtering and sorting options to find the right students based on any
                            of your
                            needs.</div>
                        <div class="font-monospace" style="width: fit-content;">
                            <div class="my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 18ch;">Current Students:</span>
                                    <span class="me-3">{{current_student_count}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'user_list' %}?role-filter=student&enrollment-status=current">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 18ch;">Alumni:</span>
                                    <span class="me-3">{{alumni_count}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'user_list' %}?role-filter=student&enrollment-status=passed_out">
                                        View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            {% endif %}
            {% if request.user.is_superuser or request.user.is_coordinator %}
            <li class="list-group-item list-group-item-accent p-4">
                <div class="d-flex align-items-start gap-4">
                    <i class="bi bi-person-check display-5"></i>
                    <div class="me-auto">
                        <h2 class="fw-bold text-body-emphasis lh-1">Approve new Users</h2>
                        <div class="mb-3">Approve or reject new Users who signed up.</div>
                        <div class="font-monospace" style="width: fit-content;">
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 15ch;">Total pending:</span>
                                <span class="me-3">{{unapproved_user_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0"
                                    href="{% url 'user_list' %}?is-approved-filter=False">
                                    View
                                </a>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 15ch;">Recruiters:</span>
                                <span class="me-3">{{unapproved_recruiter_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0"
                                    href="{% url 'user_list' %}?is-approved-filter=False&role-filter=recruiter">
                                    View
                                </a>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 15ch;">Student:</span>
                                <span class="me-3">{{unapproved_student_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0"
                                    href="{% url 'user_list' %}?is-approved-filter=False&role-filter=student">
                                    View
                                </a>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 15ch;">Staff:</span>
                                <span class="me-3">{{unapproved_staff_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0"
                                    href="{% url 'user_list' %}?is-approved-filter=False&role-filter=staff">
                                    View
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            {% endif %}
            <li class="list-group-item list-group-item-accent p-4">
                <div class="d-flex align-items-start gap-4">
                    <i class="bi bi-person-check display-5"></i>
                    <div class="me-auto">
                        <h2 class="fw-bold text-body-emphasis lh-1">Recruitments</h2>
                        <div class="mb-3">Recruitments Posted by Recruiters that Students can Apply to.</div>
                        <div class="font-monospace" style="width: fit-content;">
                            {% if request.user.is_superuser or request.user.is_coordinator %}
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 20ch;">Total posts:</span>
                                <span class="me-3">{{post_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0"
                                    href="{% url 'recruitment_posts' %}?is-active-filter=False">
                                    View
                                </a>
                            </div>
                            {% endif %}
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 20ch;">Total Active posts:</span>
                                <span class="me-3">{{active_post_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0" href="{% url 'recruitment_posts' %}">
                                    View
                                </a>
                            </div>
                            {% if request.user.role == 'recruiter' or request.user.is_superuser or request.user.is_coordinator %}
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 20ch;">Your Posts:</span>
                                <span class="me-3">{{user_post_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0"
                                    href="{% url 'recruitment_posts' %}?post-filter=by-me">
                                    View
                                </a>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <span style="width: 20ch;">Your Active posts:</span>
                                <span class="me-3">{{user_active_post_count|intword}}</span>
                                <a class="btn btn-link rounded-pill m-0 p-0"
                                    href="{% url 'recruitment_posts' %}?post-filter=by-me&is-active-filter=False">
                                    View
                                </a>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </li>
            {% if request.user.role == 'student' or request.user.role == 'recruiter' or request.user.is_superuser or request.user.is_coordinator %}
            <li class="list-group-item list-group-item-accent p-4">
                <div class="d-flex align-items-start gap-4">
                    <i class="bi bi-person-check display-5"></i>
                    <div class="me-auto">
                        <h2 class="fw-bold text-body-emphasis lh-1">Applications</h2>
                        <div class="mb-3">Applications received from Students.</div>
                        <div class="font-monospace" style="width: fit-content;">
                            {% if request.user.is_superuser or request.user.is_coordinator %}
                            <div class="my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <strong style="width: 27ch;">For all Posts:</strong>
                                    <span class="me-3">{{applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?is-active-filter=False&applications-filter-lower-limit=1">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Pending:</span>
                                    <span class="me-3">{{pending_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=P">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Selected:</span>
                                    <span class="me-3">{{selected_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Rejected:</span>
                                    <span class="me-3">{{rejected_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=R">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Shortlisted for Interview:</span>
                                    <span class="me-3">{{shortlisted_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                            </div>
                            <div class="my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <strong style="width: 27ch;">For Active Posts:</strong>
                                    <span class="me-3">{{active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?applications-filter-lower-limit=1">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Pending:</span>
                                    <span class="me-3">{{pending_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?applications-filter-lower-limit=1&applications-status-filters=P">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Selected:</span>
                                    <span class="me-3">{{selected_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Rejected:</span>
                                    <span class="me-3">{{rejected_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?applications-filter-lower-limit=1&applications-status-filters=R">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Shortlisted for Interview:</span>
                                    <span class="me-3">{{shortlisted_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                            </div>
                            {% endif %}
                            {% if request.user.role == 'recruiter' or request.user.is_superuser or request.user.is_coordinator %}
                            <div class="my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <strong style="width: 27ch;">For Your Posts:</strong>
                                    <span class="me-3">{{user_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&is-active-filter=False&applications-filter-lower-limit=1">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Pending:</span>
                                    <span class="me-3">{{pending_user_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=P">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Selected:</span>
                                    <span class="me-3">{{selected_user_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Rejected:</span>
                                    <span class="me-3">{{rejected_user_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=R">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Shortlisted for Interview:</span>
                                    <span class="me-3">{{shortlisted_user_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&is-active-filter=False&applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                            </div>
                            <div class="my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <strong style="width: 27ch;">For Your Active Posts:</strong>
                                    <span class="me-3">{{user_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&applications-filter-lower-limit=1">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Pending:</span>
                                    <span class="me-3">{{pending_user_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&applications-filter-lower-limit=1&applications-status-filters=P">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Selected:</span>
                                    <span class="me-3">{{selected_user_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Rejected:</span>
                                    <span class="me-3">{{rejected_user_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&applications-filter-lower-limit=1&applications-status-filters=R">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Shortlisted for Interview:</span>
                                    <span class="me-3">{{shortlisted_user_active_applicant_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=by-me&applications-filter-lower-limit=1&applications-status-filters=S">
                                        View
                                    </a>
                                </div>
                            </div>
                            {% endif %}
                            {% if request.user.role == 'student' %}
                            <div class="my-3">
                                <div class="d-flex align-items-center justify-content-between">
                                    <strong style="width: 27ch;">Submitted by You:</strong>
                                    <span class="me-3">{{user_application_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=applied-by-me">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Pending:</span>
                                    <span class="me-3">{{pending_user_application_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=applied-by-me&applied-status-filter=P">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Selected:</span>
                                    <span class="me-3">{{selected_user_application_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=applied-by-me&applied-status-filter=R">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Rejected:</span>
                                    <span class="me-3">{{rejected_user_application_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=applied-by-me&applied-status-filter=S">
                                        View
                                    </a>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <span style="width: 27ch;">Shortlisted for Interview:</span>
                                    <span class="me-3">{{shortlisted_user_application_count|intword}}</span>
                                    <a class="btn btn-link rounded-pill m-0 p-0"
                                        href="{% url 'recruitment_posts' %}?post-filter=applied-by-me&applied-status-filter=I">
                                        View
                                    </a>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </li>
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}